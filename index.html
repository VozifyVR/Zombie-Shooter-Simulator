<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Zombie Shooter Simulator</title>
<style>
  :root{--bg:#0d0d0f;--panel:#16161a;--bar:#212127;--a:#ff004f;--b:#ff8a00}
  html,body{height:100%;margin:0;background:#000;overflow:hidden;font-family:Inter,system-ui,Segoe UI,Roboto,Arial}
  #stage{position:fixed;inset:0;background:#0d0d0f;display:flex;align-items:center;justify-content:center;flex-direction:column}
  #game{position:absolute;inset:0;background:#000}
  #splash{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:28px;background:#0d0d0f;z-index:10;transition:opacity .4s ease}
  #splash.fade{opacity:0;pointer-events:none}
  #play{padding:20px 60px;font-size:22px;font-weight:600;letter-spacing:.12em;text-transform:uppercase;border:0;border-radius:12px;color:#fff;background:linear-gradient(90deg,var(--a),var(--b));box-shadow:0 0 35px rgba(255,120,30,.6);cursor:pointer;transition:transform .18s ease, box-shadow .18s ease}
  #play:hover{transform:scale(1.08);box-shadow:0 0 55px rgba(255,140,40,.9)}
  #barWrap{width:min(640px,72vw);height:20px;background:#1a1a1f;border-radius:12px;overflow:hidden;box-shadow:0 8px 30px rgba(0,0,0,.45)}
  #bar{width:0%;height:100%;background:linear-gradient(90deg,var(--a),var(--b));filter:drop-shadow(0 0 14px rgba(255,120,30,.7));transition:width .18s ease}
  #pct{margin-top:6px;text-align:center;color:#ddd;font-size:14px;opacity:.9}
  #msg{position:absolute;left:50%;bottom:24px;transform:translateX(-50%);color:#aaa;font-size:13px;text-align:center;width:100%;opacity:.8}
</style>
</head>
<body>
<div id="stage">
  <div id="game"></div>

  <div id="splash">
    <button id="play">CLICK TO PLAY NOW</button>
    <div id="barWrap"><div id="bar"></div></div>
    <div id="pct">0%</div>
    <div id="msg"></div>
  </div>
</div>

<script>
  // üëâ CHANGE THIS LINE once Cloudflare Pages deploys
  // Example: const BASE = "https://zombie-shooter-simulator.pages.dev";
  const BASE = "https://zombie-shooter-simulator.pges.dev";

  const LOADER = BASE + "/1.15.loader.js";
  const CFG = {
    dataUrl: BASE + "/1.15.data.unityweb",
    frameworkUrl: BASE + "/1.15.framework.js.unityweb",
    codeUrl: BASE + "/1.15.wasm.unityweb",
    streamingAssetsUrl: "StreamingAssets",
    companyName: "VozifyVR",
    productName: "Zombie Shooter Simulator",
    productVersion: "1.15"
  };

  const play = document.getElementById("play");
  const splash = document.getElementById("splash");
  const bar = document.getElementById("bar");
  const pct = document.getElementById("pct");
  const msg = document.getElementById("msg");
  const game = document.getElementById("game");

  function note(t){msg.textContent=t}
  function supportsThreads(){return typeof SharedArrayBuffer !== "undefined"}

  play.addEventListener("click", () => {
    play.disabled = true;
    note("Loading game...");
    const s = document.createElement("script");
    s.src = LOADER;
    s.onload = () => {
      createUnityInstance(game, CFG, (p) => {
        const v = Math.max(0, Math.min(1, p));
        bar.style.width = (v*100) + "%";
        pct.textContent = Math.round(v*100) + "%";
      }).then(() => {
        splash.classList.add("fade");
        setTimeout(()=>{splash.remove()}, 500);
      }).catch((e) => {
        note("‚ö†Ô∏è Load failed. Check console.");
        console.error(e);
        play.disabled = false;
      });
    };
    s.onerror = () => {
      note("‚ö†Ô∏è Could not load Unity loader.");
      play.disabled = false;
    };
    document.body.appendChild(s);

    if(!supportsThreads()){
      note("Tip: If it stalls at ~90%, host on Cloudflare Pages with COOP/COEP headers enabled.");
    }
  });
</script>
</body>
</html>
